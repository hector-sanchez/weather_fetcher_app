<%# app/views/weather/show.html.erb %>

<main class="min-h-screen flex flex-col items-center justify-center bg-white">
	<div class="w-full flex flex-col items-center">
		<header class="mb-10 w-full flex flex-col items-center">
			<h1 class="text-6xl font-bold text-center mb-8 text-gray-800">
				Weather
			</h1>
		</header>

		<% if flash[:alert] %>
      <aside class="mb-4 w-full p-4 bg-red-100 text-red-800 border border-red-300 text-center">
        <%= flash[:alert] %>
      </aside>
		<% end %>

    <% if flash[:notice] %>
      <aside class="mb-4 w-full p-4 bg-yellow-100 text-yellow-800 border border-yellow-300 text-center">
        <%= flash[:notice] %>
      </aside>
		<% end %>

    <%= form_with url: weather_search_path, method: :post, local: true, data: { turbo: "false" }, class: "w-full flex justify-center items-center px-4" do |f| %>
      <div class="flex flex-col gap-6 w-full max-w-4xl">
        <%= f.text_field :address, class: "w-full px-6 py-6 text-2xl border-2 border-black-300 shadow-md focus:outline-none focus:ring-4 focus:ring-blue-300 focus:border-blue-500", autofocus: true, placeholder: "Enter full address (e.g., 123 Main Street, Anytown, CA 12345)" %>
        <div class="flex justify-center">
          <%= f.submit "Get Weather", class: "px-12 py-6 bg-blue-600 text-white text-2xl font-bold shadow-lg hover:bg-blue-700 transition-colors duration-200" %>
        </div>
      </div>
		<% end %>

    <% if @weather.present? && @weather[:valid] %>
      <section class="mt-10 w-full p-8 rounded shadow bg-white flex flex-col items-center border border-gray-200">
        <h2 class="text-2xl font-semibold mb-4 text-center">
          Weather for <%= @weather[:location][:name] %>, <%= @weather[:location][:region] %>, <%= @weather[:location][:country] %>
        </h2>
        <p class="mb-2 text-lg">Latitude: <%= @weather[:location][:latitude] %></p>
        <p class="mb-2 text-lg">Longitude: <%= @weather[:location][:longitude] %></p>
        <p class="mb-2 text-lg">Condition: <%= @weather[:current_condition][:text] %></p>
      </section>
		<% end %>
	</div>
</main>
